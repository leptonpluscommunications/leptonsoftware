<!DOCTYPE html>
<html>

<head>
    <title>
        User Data Management
    </title>
    <style>
        body {
            margin: 4rem;
        }

        #formContainer {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-top: 10px;
        }

        input,
        textarea {
            width: 300px;
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        button {
            margin: 10px;
            padding: 8px 16px;
            background-color: #4CAF50;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        button:hover {
            background-color: #45a049;
        }

        table {
            border-collapse: collapse;
            margin-bottom: 20px;
            width: 100%;
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #4CAF50;
            color: #fff;
        }
    </style>
</head>

<body>
    <h1 style="color: green;">
      WELCOME TO LEPTON PLUS COMMUNICATIONS!!
    </h1>
    <h2>REAL TIME DATABASE</h2>

    <table id="outputTable">
        <tr>
            <th>ID</th>
            <th>Longitude</th>
            <th>Latitude</th>
            <th>Action</th>
        </tr>
    </table>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Create a tbody element to append rows to
            const tbody = document.createElement('tbody');
            const table = document.getElementById("outputTable");
            table.appendChild(tbody);

            fetch("http://localhost:8080/fetch")
                .then(res => res.json())
                .then(data => {
                    data.forEach(user => {
                        const row = tbody.insertRow();
                        const cell1 = row.insertCell(0);
                        const cell2 = row.insertCell(1);
                        const cell3 = row.insertCell(2);
                        const cell4 = row.insertCell(3);

                        cell1.textContent = user.ID;
                        cell2.textContent = user.Longitude;
                        cell3.textContent = user.Latitude;

                        const editButton = document.createElement("button");
                        editButton.textContent = "Edit";
                        editButton.onclick = () => editData(row);

                        const deleteButton = document.createElement("button");
                        deleteButton.textContent = "Delete";
                        deleteButton.onclick = () => deleteData(row);

                        cell4.appendChild(editButton);
                        cell4.appendChild(deleteButton);
                    });
                })
                .catch(error => {
                    console.log("Error fetching data:", error);
                });

            function editData(row) {
                // Implement edit logic here
                console.log("Edit clicked for row:", row);
            }

            function deleteData(row) {
                // Implement delete logic here
                console.log("Delete clicked for row:", row);
                row.remove();
            }
        });
    </script>
</body>

</html>
